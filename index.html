<!DOCTYPE html>
<html lang="it">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="godie_logo_transparentpiccola.png" type="image/png">
    <title>Diego Pacchiana</title>
</head>

<body>
    <nav>
        <a href="aboutme.html">ABOUT ME</a>
        <a href="archive.html">ARCHIVE</a>
        <a href="contact.html">CONTACT</a>
    </nav>
    <div class="hero-home">
        <!-- VHS HUD corners -->
        <div class="vhs-hud vhs-top-left"><span class="vhs-rec-dot"></span> REC</div>
        <div class="vhs-hud vhs-top-right"><span class="vhs-battery"><span class="vhs-battery-fill"></span></span> LOW
            BATTERY</div>
        <div class="vhs-hud vhs-bottom-left" id="vhsClock"></div>
        <div class="vhs-hud vhs-bottom-right" id="vhsDate"></div>
        <a href="archive.html" class="logo-big">
            <img src="godie_logo_transparentpiccola.png" class="logo-img" id="logoImg" alt="Godie Logo">
            <span class="logo-text" id="logoText">DIEGO PACCHIANA</span>
        </a>

        <!-- VIDEO WALL -->
        <div class="video-frame">
            <!-- VIDEO 1: Black Swan -->
            <div class="video-container">
                <iframe src="https://player.vimeo.com/video/1164405643?background=1&autoplay=1&loop=1&byline=0&title=0"
                    class="mini-video" frameborder="0" allow="autoplay; fullscreen" allowfullscreen>
                </iframe>
                <div class="rec-overlay">REC ●</div>
            </div>

            <!-- VIDEO 2: BTS BlackSwan -->
            <div class="video-container">
                <iframe src="https://player.vimeo.com/video/1164402424?background=1&autoplay=1&loop=1&byline=0&title=0"
                    class="mini-video" frameborder="0" allow="autoplay; fullscreen" allowfullscreen>
                </iframe>
                <div class="rec-overlay">REC ●</div>
            </div>
        </div>
    </div>

    <!-- VIMEO SDK & LOOP LOGIC -->
    <script src="https://player.vimeo.com/api/player.js"></script>
    <script>
        const iframes = document.querySelectorAll('iframe.mini-video');

        iframes.forEach(iframe => {
            const player = new Vimeo.Player(iframe);

            // Loop automatically at 10 seconds
            player.on('timeupdate', function (data) {
                if (data.seconds >= 10) {
                    player.setCurrentTime(0);
                }
            });
        });
    </script>
    <!-- LOGO 3D TILT + VIBRATION -->
    <script>
        const logoImg = document.getElementById('logoImg');
        const VIBRATE_RADIUS = 200; // start vibrating within this distance
        let mouseX = 0, mouseY = 0;
        let vibrateId = null;

        function vibrate() {
            const rect = logoImg.getBoundingClientRect();
            const logoCX = rect.left + rect.width / 2;
            const logoCY = rect.top + rect.height / 2;
            const dist = Math.hypot(mouseX - logoCX, mouseY - logoCY);
            const proximity = Math.max(0, 1 - dist / VIBRATE_RADIUS); // 0 = far, 1 = on top

            // Tilt based on screen position
            const tx = (mouseX / window.innerWidth) - 0.5;
            const ty = (mouseY / window.innerHeight) - 0.5;
            const rotateY = tx * 50;
            const rotateX = -ty * 50;

            // Vibration shake — intensity based on proximity
            const shake = proximity * 25; // max 25px shake
            const shakeX = (Math.random() - 0.5) * shake * 2;
            const shakeY = (Math.random() - 0.5) * shake * 2;

            logoImg.style.transform = `perspective(400px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translate(${shakeX}px, ${shakeY}px)`;

            if (proximity > 0) {
                vibrateId = requestAnimationFrame(vibrate);
            } else {
                vibrateId = null;
                logoImg.style.transform = `perspective(400px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
            }
        }

        document.addEventListener('mousemove', function (e) {
            mouseX = e.clientX;
            mouseY = e.clientY;
            if (!vibrateId) {
                vibrateId = requestAnimationFrame(vibrate);
            }
        });
    </script>
    <!-- LOGO TEXT CURSOR SPOTLIGHT -->
    <script>
        const logoText = document.getElementById('logoText');
        const heroHome = document.querySelector('.hero-home');
        const text = logoText.textContent;
        const RADIUS = 45; // px influence radius

        // Wrap each character in a span
        logoText.innerHTML = text.split('').map(char =>
            char === ' '
                ? '<span class="logo-char">&nbsp;</span>'
                : `<span class="logo-char">${char}</span>`
        ).join('');

        const chars = logoText.querySelectorAll('.logo-char');

        heroHome.addEventListener('mousemove', function (e) {
            chars.forEach(span => {
                const rect = span.getBoundingClientRect();
                const charCenterX = rect.left + rect.width / 2;
                const charCenterY = rect.top + rect.height / 2;
                const dist = Math.hypot(e.clientX - charCenterX, e.clientY - charCenterY);
                const t = Math.max(0, 1 - dist / RADIUS);

                // Sharp snap: red if close, white if far
                const on = t > 0.3 ? 1 : 0;
                const g = Math.round(255 * (1 - on));
                const b = Math.round(255 * (1 - on));
                span.style.color = `rgb(255, ${g}, ${b})`;
            });
        });

        heroHome.addEventListener('mouseleave', function () {
            chars.forEach(span => {
                span.style.color = '#fff';
            });
        });
    </script>
    <!-- VHS LIVE CLOCK -->
    <script>
        function updateClock() {
            const now = new Date().toLocaleTimeString('it-IT', {
                timeZone: 'Europe/Rome',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            document.getElementById('vhsClock').textContent = 'BRESCIA  ' + now;
            const date = new Date().toLocaleDateString('it-IT', {
                timeZone: 'Europe/Rome',
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            }).replace(/\//g, ' . ');
            document.getElementById('vhsDate').textContent = date;
        }
        updateClock();
        setInterval(updateClock, 1000);
    </script>
    <script src="cursor.js"></script>
</body>

</html>
