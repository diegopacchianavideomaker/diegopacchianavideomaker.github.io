<!DOCTYPE html>
<html lang="it">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="godie_logo_transparentpiccola.png" type="image/png">
    <title>Diego Pacchiana</title>
</head>

<body>
    <nav>
        <a href="aboutme.html">ABOUT ME</a>
        <a href="archive.html">ARCHIVE</a>
        <a href="contact.html">CONTACT</a>
    </nav>
    <div class="hero-home">
        <!-- VHS HUD corners -->
        <div class="vhs-hud vhs-top-left"><span class="vhs-rec-dot"></span> REC</div>
        <div class="vhs-hud vhs-top-right"><span class="vhs-battery"><span class="vhs-battery-fill"></span></span> LOW
            BATTERY</div>
        <div class="vhs-hud vhs-bottom-left" id="vhsClock"></div>
        <div class="vhs-hud vhs-bottom-right" id="vhsDate"></div>
        <a href="archive.html" class="logo-big">
            <img src="godie_logo_transparentpiccola.png" class="logo-img" id="logoImg" alt="Godie Logo">
            <span class="logo-text" id="logoText">DIEGO PACCHIANA</span>
        </a>

        <!-- VIDEO WALL -->
        <div class="video-frame">
            <!-- VIDEO 1: Black Swan -->
            <div class="video-container">
                <iframe src="https://player.vimeo.com/video/1164405643?background=1&autoplay=1&loop=1&byline=0&title=0"
                    class="mini-video" frameborder="0" allow="autoplay; fullscreen" allowfullscreen>
                </iframe>
                <div class="rec-overlay">REC ●</div>
            </div>

            <!-- VIDEO 2: YouTube -->
            <div class="video-container">
                <iframe id="ytPlayer"
                    src="https://www.youtube.com/embed/OFxLYx2tUro?autoplay=1&mute=1&loop=1&controls=0&showinfo=0&rel=0&playlist=OFxLYx2tUro&enablejsapi=1&vq=hd1080"
                    class="mini-video" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
                </iframe>
                <div class="rec-overlay">REC ●</div>
            </div>
        </div>
    </div>

    <!-- VIMEO SDK & LOOP LOGIC (Video 1 only) -->
    <script src="https://player.vimeo.com/api/player.js"></script>
    <script>
        document.querySelectorAll('iframe.mini-video:not(#ytPlayer)').forEach(iframe => {
            const player = new Vimeo.Player(iframe);
            player.on('timeupdate', function (data) {
                if (data.seconds >= 10) {
                    player.setCurrentTime(0);
                }
            });
        });
    </script>

    <!-- YouTube IFrame API & 10s muted loop (Video 2) -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        var ytPlayerObj;
        function onYouTubeIframeAPIReady() {
            ytPlayerObj = new YT.Player('ytPlayer', {
                events: {
                    'onReady': function (event) {
                        event.target.mute();
                        event.target.setPlaybackQuality('hd1080');
                        event.target.playVideo();
                        setInterval(function () {
                            if (ytPlayerObj && ytPlayerObj.getCurrentTime && ytPlayerObj.getCurrentTime() >= 10) {
                                ytPlayerObj.seekTo(0, true);
                            }
                        }, 500);
                    }
                }
            });
        }
    </script>

    <!-- LOGO 3D TILT + VIBRATION -->
    <script>
        const logoImg = document.getElementById('logoImg');
        const VIBRATE_RADIUS = 200; // start vibrating within this distance
        let mouseX = 0, mouseY = 0;
        let vibrateId = null;

        function vibrate() {
            const rect = logoImg.getBoundingClientRect();
            const logoCX = rect.left + rect.width / 2;
            const logoCY = rect.top + rect.height / 2;
            const dist = Math.hypot(mouseX - logoCX, mouseY - logoCY);
            const proximity = Math.max(0, 1 - dist / VIBRATE_RADIUS); // 0 = far, 1 = on top

            // Tilt based on screen position — subtle 3D
            const tx = (mouseX / window.innerWidth) - 0.5;
            const ty = (mouseY / window.innerHeight) - 0.5;
            const rotateY = tx * 50;
            const rotateX = -ty * 50;

            // Vibration shake — cubic easing for gradual ramp-up
            const easedProximity = proximity * proximity * proximity; // gentle start, strong peak
            const shake = easedProximity * 1.5; // reduced shake for subtler effect
            const shakeX = (Math.random() - 0.5) * shake * 2;
            const shakeY = (Math.random() - 0.5) * shake * 2;

            // Dynamic scale — grows slightly as cursor approaches
            const scale = 1 + proximity * 0.15; // up to 1.15x

            // Dynamic outline — sharp red contour that appears on proximity
            const baseFilter = 'drop-shadow(0 0 1px #fff) drop-shadow(0 0 1px #fff)';
            const outlineOpacity = Math.min(proximity * 1.5, 1);
            const redOutline = proximity > 0.1
                ? ` drop-shadow(0 0 0px rgba(255,0,0,${outlineOpacity.toFixed(2)})) drop-shadow(1px 0 0px rgba(255,0,0,${outlineOpacity.toFixed(2)})) drop-shadow(-1px 0 0px rgba(255,0,0,${outlineOpacity.toFixed(2)})) drop-shadow(0 1px 0px rgba(255,0,0,${outlineOpacity.toFixed(2)})) drop-shadow(0 -1px 0px rgba(255,0,0,${outlineOpacity.toFixed(2)}))`
                : '';
            logoImg.style.filter = baseFilter + redOutline;

            logoImg.style.transform = `perspective(600px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(${scale}) translate(${shakeX}px, ${shakeY}px)`;

            if (proximity > 0) {
                vibrateId = requestAnimationFrame(vibrate);
            } else {
                vibrateId = null;
                logoImg.style.transform = `perspective(600px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
                logoImg.style.filter = baseFilter;
            }
        }

        document.addEventListener('mousemove', function (e) {
            mouseX = e.clientX;
            mouseY = e.clientY;
            if (!vibrateId) {
                vibrateId = requestAnimationFrame(vibrate);
            }
        });
    </script>
    <!-- LOGO TEXT CURSOR SPOTLIGHT -->
    <script>
        const logoText = document.getElementById('logoText');
        const heroHome = document.querySelector('.hero-home');
        const text = logoText.textContent;
        const RADIUS = 45; // px influence radius

        // Wrap each character in a span
        logoText.innerHTML = text.split('').map(char =>
            char === ' '
                ? '<span class="logo-char">&nbsp;</span>'
                : `<span class="logo-char">${char}</span>`
        ).join('');

        const chars = logoText.querySelectorAll('.logo-char');

        heroHome.addEventListener('mousemove', function (e) {
            chars.forEach(span => {
                const rect = span.getBoundingClientRect();
                const charCenterX = rect.left + rect.width / 2;
                const charCenterY = rect.top + rect.height / 2;
                const dist = Math.hypot(e.clientX - charCenterX, e.clientY - charCenterY);
                const t = Math.max(0, 1 - dist / RADIUS);

                // Sharp snap: red if close, gray if far
                const on = t > 0.3 ? 1 : 0;
                const g = Math.round(153 * (1 - on));
                const b = Math.round(153 * (1 - on));
                span.style.color = on ? `rgb(255, 0, 0)` : `rgb(153, 153, 153)`;
            });
        });

        heroHome.addEventListener('mouseleave', function () {
            chars.forEach(span => {
                span.style.color = '#999';
            });
        });
    </script>
    <!-- VHS LIVE CLOCK -->
    <script>
        function updateClock() {
            const now = new Date().toLocaleTimeString('it-IT', {
                timeZone: 'Europe/Rome',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            document.getElementById('vhsClock').textContent = 'BRESCIA  ' + now;
            const date = new Date().toLocaleDateString('it-IT', {
                timeZone: 'Europe/Rome',
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            }).replace(/\//g, ' . ');
            document.getElementById('vhsDate').textContent = date;
        }
        updateClock();
        setInterval(updateClock, 1000);
    </script>
    <script src="cursor.js"></script>
</body>

</html>